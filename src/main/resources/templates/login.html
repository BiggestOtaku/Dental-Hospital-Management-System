<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login</title>

    <!-- Embedded clinic-themed styles (same aesthetic as your other pages) -->
    <style>
        :root{
          --bg-grad: linear-gradient(180deg,#f7fbff,#ffffff);
          --brand-1: #2b71d9;
          --brand-2: #36a2ff;
          --muted: #6b6b6b;
          --card-bg: #ffffff;
          --shadow: 0 10px 30px rgba(8,25,60,0.06);
          --radius: 12px;
          --input-border: #e6eefb;
        }

        /* reset */
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
          font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
          background:var(--bg-grad);
          color:#222;
          -webkit-font-smoothing:antialiased;
          -moz-osx-font-smoothing:grayscale;
          padding:28px 16px;
          line-height:1.45;
        }

        /* page container */
        .page {
          max-width: 520px;
          margin: 36px auto;
          padding: 8px;
        }

        .card {
          background: var(--card-bg);
          border-radius: var(--radius);
          padding: 28px;
          box-shadow: var(--shadow);
        }

        .brand {
          display:flex;
          align-items:center;
          gap:12px;
          margin-bottom: 14px;
        }
        .logo {
          width:46px;height:46px;border-radius:12px;
          display:flex;align-items:center;justify-content:center;
          color:white;font-weight:700;font-size:16px;
          background: linear-gradient(135deg,var(--brand-1),var(--brand-2));
          box-shadow: 0 6px 18px rgba(43,113,217,0.12);
        }
        .brand h1 { font-size:16px;color:var(--brand-1); margin: 0; }

        /* heading */
        h2 {
          font-size:20px;
          color:var(--brand-1);
          margin-bottom:12px;
        }

        /* form layout */
        form.login-form { display:flex; flex-direction:column; gap:12px; }
        .field {
          display:flex; flex-direction:column; gap:6px;
        }
        label {
          font-weight:600; color:#333; font-size:13px;
        }
        input[type="email"], input[type="password"] {
          width:100%;
          padding:10px 12px;
          border-radius:10px;
          border:1px solid var(--input-border);
          background:#fbfdff;
          font-size:14px;
          outline:none;
          transition: box-shadow .12s ease, border-color .12s ease;
        }
        input:focus {
          border-color:var(--brand-1);
          box-shadow: 0 6px 20px rgba(43,113,217,0.08);
        }

        .actions {
          display:flex;
          gap:12px;
          align-items:center;
          justify-content:space-between;
          margin-top:4px;
        }

        .btn {
          padding:10px 14px;
          border-radius:10px;
          font-weight:700;
          font-size:14px;
          cursor:pointer;
          border:none;
          display:inline-flex;
          align-items:center;
          gap:8px;
        }
        .btn-primary {
          background: linear-gradient(90deg,var(--brand-1),var(--brand-2));
          color:white;
          box-shadow: 0 10px 30px rgba(43,113,217,0.18);
        }
        .btn-link {
          background:transparent;
          color:var(--brand-1);
          border:1px solid transparent;
          text-decoration:none;
          font-weight:600;
          padding:8px 10px;
          border-radius:8px;
        }

        .helper { font-size:13px; color:var(--muted); margin-top:6px; }

        .message {
          padding:10px 12px;
          border-radius:10px;
          font-weight:600;
          margin-bottom:10px;
        }
        .message.error { background:#fff2f0; color:#8b1a1a; border:1px solid #f6c6c4; }
        .message.success { background:#f0fff6; color:#0a6f3a; border:1px solid #bde9c9; }

        .footer {
          margin-top:14px;
          font-size:13px;
          color:var(--muted);
          text-align:center;
        }

        @media (max-width:520px){
          .page { margin:18px 12px; padding:0; }
          .card { padding:18px; }
          h2 { font-size:18px; }
        }
    </style>
</head>
<body>
<div class="page">
    <div class="card" role="main" aria-labelledby="login-heading">
        <div class="brand" style="margin-bottom:10px;">
            <div class="logo">DH</div>
            <h1>Dental Clinic</h1>
        </div>

        <h2 id="login-heading">Login</h2>

        <!-- Inline error shown when Spring redirects to /login?error -->
        <div th:if="${param.error}" class="message error" role="alert">
            Invalid email or password. Please try again.
        </div>

        <!-- logout success message -->
        <div th:if="${param.logout}" class="message success" role="status">
            You have been logged out successfully.
        </div>

        <!-- Controller-set messages (if any) -->
        <div th:if="${errorMessage}" class="message error" th:text="${errorMessage}"></div>
        <div th:if="${successMessage}" class="message success" th:text="${successMessage}"></div>

        <form class="login-form" th:action="@{/login}" method="post" novalidate>
            <!-- CSRF token (required if CSRF enabled) -->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

            <div class="field">
                <label for="email">Email</label>
                <input id="email" type="email" name="email" required />
            </div>

            <div class="field">
                <label for="password">Password</label>
                <input id="password" type="password" name="password" required />
            </div>

            <div class="actions">
                <a th:href="@{/register}" class="btn-link" role="button">Don't have an account?</a>
                <button type="submit" class="btn btn-primary">Login</button>
            </div>
        </form>

        <div class="footer">If you forget your password, contact the clinic admin.</div>
    </div>
</div>

<!-- Optional: popup alert when ?error present -->
<script th:if="${param.error}">
    // friendly alert â€” runs only when Spring redirected with ?error
    window.setTimeout(function(){
      try { alert('Login failed: Invalid email or password'); } catch(e){}
    }, 50);
</script>
</body>
</html>
